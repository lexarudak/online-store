!function(){"use strict";var t={91:function(t){t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),e.hash&&(t+=e.hash),e.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(t)?'"'.concat(t,'"'):t):t}},428:function(t,e,n){t.exports=n.p+"assets/eucalypt.png"},226:function(t,e,n){t.exports=n.p+"assets/empty-cart-icon.svg"},302:function(t,e,n){t.exports=n.p+"assets/rs_school.svg"}},e={};function n(a){var i=e[a];if(void 0!==i)return i.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,n),r.exports}n.m=t,n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var a=e.getElementsByTagName("script");a.length&&(t=a[a.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t}(),n.b=document.baseURI||self.location.href,function(){var t=n(91),e=n.n(t),a=new URL(n(428),n.b),i=new URL(n(302),n.b),r=new URL(n(226),n.b),s=(e()(a),e()(i),e()(r),JSON.parse('{"products":[{"id":1,"title":"Echeveria SC-092","description":"Succulent plants are drought-resistant plants in which the leaves, stem, or roots have become more than usually fleshy by the development of water-storing tissue.","height":18,"price":15,"discountPercentage":20,"rating":4.5,"stock":28,"type":"Succulent","thumbnail":"plants/1/1.jpg","images":["plants/1/1.jpg","plants/1/2.jpg","plants/1/3.jpg"]},{"id":2,"title":"Echeveria SC-018","description":"Flowers on short stalks (cymes) arise from compact rosettes of succulent fleshy, often brightly coloured leaves.","height":17,"price":18,"discountPercentage":0,"rating":4.3,"stock":34,"type":"Succulent","thumbnail":"plants/2/1.jpg","images":["plants/2/1.jpg","plants/2/2.jpg","plants/2/3.jpg"]},{"id":3,"title":"Echeveria SC-035","description":"Echeveria is a large genus of flowering plant in the family Crassulaceae, native to semi-desert areas of Central America, Mexico and northwestern South America.","height":10,"price":10,"discountPercentage":10,"rating":4.6,"stock":36,"type":"Succulent","thumbnail":"plants/3/1.jpg","images":["plants/3/1.jpg","plants/3/2.jpg","plants/3/3.jpg"]},{"id":4,"title":"Echeveria SC-019","description":"Plants are polycarpic, meaning that they may flower and set seed many times over the course of their lifetimes.","height":15,"price":22,"discountPercentage":0,"rating":4.8,"stock":13,"type":"Succulent","thumbnail":"plants/4/1.jpg","images":["plants/4/1.jpg","plants/4/2.jpg","plants/4/3.jpg"]},{"id":5,"title":"Echeveria SC-018","description":"Echeveria is named for Atanasio Echeverría y Godoy, a botanical illustrator who contributed to Flora Mexicana.","height":14,"price":20,"discountPercentage":10,"rating":4.3,"stock":32,"type":"Succulent","thumbnail":"plants/5/1.jpg","images":["plants/5/1.jpg","plants/5/2.jpg"]},{"id":6,"title":"Aeonium AN-023","description":"A feature which distinguishes this genus from many of its relatives is the manner in which the flowers bear free petals, and are divided into 6 or 12 sections.","height":15,"price":10,"discountPercentage":50,"rating":3.7,"stock":23,"type":"Succulent","thumbnail":"plants/6/1.jpg","images":["plants/6/1.jpg","plants/6/2.jpg"]},{"id":7,"title":"Sansevieria SV-01","description":"The plant has distinct sword-like leaves that grow upright, having an uncanny resemblance to artificial foliage.","height":55,"price":30,"discountPercentage":10,"rating":4.2,"stock":0,"type":"Sansevieria","thumbnail":"plants/7/1.jpg","images":["plants/7/1.jpg","plants/7/2.jpg"]},{"id":8,"title":"Sansevieria SV-02","description":"Plants are easy to care for and maintain; hence are greatly found in closed spaces like homes and offices.","height":50,"price":25,"discountPercentage":20,"rating":4.1,"stock":38,"type":"Sansevieria","thumbnail":"plants/8/1.jpg","images":["plants/8/1.jpg","plants/8/2.jpg"]},{"id":9,"title":"Sansevieria SV-09","description":"It’s a hardy, resilient plant that can withstand low-light conditions, fewer water requirements, and dry environments, both indoors and outdoors.","height":55,"price":30,"discountPercentage":0,"rating":4.5,"stock":36,"type":"Sansevieria","thumbnail":"plants/9/1.jpg","images":["plants/9/1.jpg","plants/9/2.jpg"]},{"id":10,"title":"Strelitzia SL-03","description":"The leaves are large, similar to a banana leaf in appearance, but with a longer petiole, and arranged strictly in two ranks to form a fan-like crown of evergreen foliage.","height":95,"price":50,"discountPercentage":20,"rating":4.8,"stock":28,"type":"Flowering plant","thumbnail":"plants/10/1.jpg","images":["plants/10/1.jpg","plants/10/2.jpg"]},{"id":11,"title":"Strelitzia SL-08","description":"It is a low-maintenance plant that is easy to grow in the garden; it is fairly tolerant of soil conditions and needs little water once established. If cared for well, they will flower several times in a year","height":75,"price":40,"discountPercentage":10,"rating":4.2,"stock":65,"type":"Flowering plant","thumbnail":"plants/11/1.jpg","images":["plants/11/1.jpg","plants/11/2.jpg"]},{"id":12,"title":"Spathiphyllum","description":"With the striking contrast of the dark green foliage and the creamy white flowers held high on stiff stems it holds it\'s own well and looks attractive in all types of homes and design schemes.","height":55,"price":38,"discountPercentage":0,"rating":4.6,"stock":52,"type":"Flowering plant","thumbnail":"plants/12/1.jpg","images":["plants/12/1.jpg","plants/12/2.jpg"]},{"id":13,"title":"Orchid OR-012","description":"Orchids are popular houseplants that typically can be started anytime for indoor growth, though repotting is best after flowering.","height":26,"price":20,"discountPercentage":20,"rating":4.8,"stock":40,"type":"Flowering plant","thumbnail":"plants/13/1.jpg","images":["plants/13/1.jpg","plants/13/2.jpg"]},{"id":14,"title":"Orchid OR-037","description":"Orchids have a mystique that seems to set them apart from most other flowers: They are elegant and almost unreal in their perfection. Even though orchids are one of the largest flowering plant families, every orchid species has a unique look.","height":27,"price":25,"discountPercentage":0,"rating":4.8,"stock":40,"type":"Flowering plant","thumbnail":"plants/14/1.jpg","images":["plants/14/1.jpg","plants/14/2.jpg"]},{"id":15,"title":"Fern FR-005","description":"It\'s such a universal plant that it perfectly fits any interior - regardless of its style. But it\'s a particularly good choice for Boho and urban jungle styles.","height":45,"price":30,"discountPercentage":10,"rating":4.7,"stock":35,"type":"Fern","thumbnail":"plants/15/1.jpg","images":["plants/15/1.jpg","plants/15/2.jpg","plants/15/3.jpg"]},{"id":16,"title":"Fern FRA-013","description":"Fern is one of the most popular house plants. Although there are several hundreds of fern species of various needs, the most common ones are fairly easy to grow and they don\'t need any special treatment. ","height":180,"price":98,"discountPercentage":50,"rating":4.2,"stock":14,"type":"Fern","thumbnail":"plants/16/1.jpg","images":["plants/16/1.jpg","plants/16/2.jpg"]},{"id":17,"title":"Lavender LV-03","description":"Lavender is technically a flower, herb, and a shrub. It is a flowering semi-woody herbaceous shrub often used as an herb in the kitchen or traditional medicine cabinet.","height":36,"price":13,"discountPercentage":0,"rating":4.5,"stock":38,"type":"Lavender","thumbnail":"plants/17/1.jpg","images":["plants/17/1.jpg","plants/17/2.jpg"]},{"id":18,"title":"Lavender LV-07","description":"Lavenders are small evergreen shrubs with gray-green hoary linear leaves. The purple flowers are sparsely arranged on spikes at the tips of long bare stalks and produce small nutlet fruits.","height":30,"price":10,"discountPercentage":20,"rating":4.6,"stock":23,"type":"Lavender","thumbnail":"plants/18/1.jpg","images":["plants/18/1.jpg","plants/18/2.jpg"]},{"id":19,"title":"Cactus CCT-011","description":"Cactus plants are a popular decorating trend, but they have additional benefits beyond adding some low-maintenance greenery to your home.","height":25,"price":24,"discountPercentage":20,"rating":4.4,"stock":34,"type":"Cactus","thumbnail":"plants/19/1.jpg","images":["plants/19/1.jpg","plants/19/2.jpg"]},{"id":20,"title":"Cactus CCT-035","description":"One of the key features in the botanical description of a cactus plant is that it has clusters of spines, which are unique to cactus. Unlike the prickly parts of other plants, such as pine needles, cactus spines do not act as leaves or contain any cells or signs of life.","height":120,"price":70,"discountPercentage":10,"rating":4.1,"stock":31,"type":"Cactus","thumbnail":"plants/20/1.jpg","images":["plants/20/1.jpg","plants/20/2.jpg"]},{"id":21,"title":"Cactus CCT-017","description":"Cacti are unique among many plant species for their ability to adapt to extremely dry environments. They don\'t have leaves, so photosynthesis occurs in their trunks.","height":65,"price":40,"discountPercentage":20,"rating":4.4,"stock":33,"type":"Cactus","thumbnail":"plants/21/1.jpg","images":["plants/21/1.jpg","plants/21/2.jpg"]},{"id":22,"title":"Boxwood","description":"Boxwood is prized for their densely packed, light-green leaves and a rounded, compact growth habit.","height":105,"price":80,"discountPercentage":30,"rating":4.5,"stock":46,"type":"Tree","thumbnail":"plants/22/1.jpg","images":["plants/22/1.jpg","plants/22/2.jpg","plants/22/3.jpg"]},{"id":23,"title":"Ficus Lyrata","description":"Ficus is a popular indoor tree featuring very large, heavily veined, and glossy violin-shaped leaves that grow upright on a sleek trunk.","height":130,"price":90,"discountPercentage":20,"rating":4.4,"stock":13,"type":"Tree","thumbnail":"plants/23/1.jpg","images":["plants/23/1.jpg","plants/23/2.jpg"]},{"id":24,"title":"Clusia","description":"The foliage is this plant\'s feature characteristic - leaves are thick and leathery, shaped like fat teardrops or paddles.","height":125,"price":88,"discountPercentage":50,"rating":4.5,"stock":27,"type":"Tree","thumbnail":"plants/24/1.jpg","images":["plants/24/1.jpg","plants/24/2.jpg"]}],"total":24}'));function o(t){return t instanceof EventTarget}function c(t,e=document){const n=e.querySelector(t);if(null===n)throw new Error("Element not found!");return n}function p(t,e,n){const a=n.id.toString();n.stock>0?(a in e.basket?t.classList.add("button-purple"):t.classList.add("button"),a in e.basket?t.innerHTML="In your cart":t.innerHTML="Add to cart",t.addEventListener("click",(function(){a in e.basket?e.delete(a):e.add(a),a in e.basket?t.classList.replace("button","button-purple"):t.classList.replace("button-purple","button"),a in e.basket?t.innerHTML="In your cart":t.innerHTML="Add to cart",e.updateHeader()}))):(t.classList.add("button-unable"),t.innerHTML="Not available")}const l={PLANTS10:10,SALE10:10,FORYOU10:10};var u=class{constructor(t,e){this.container=document.getElementById("page-container"),this.id=e,this.cart=t}fillPage(t,e){return console.log("Load page:",e),t}makePage(t){const e=document.getElementById(this.id);if(e instanceof HTMLTemplateElement&&this.container){const n=e.content.cloneNode(!0);return t&&n instanceof DocumentFragment?this.fillPage(n,t):n}return null}draw(t){const e=this.makePage(t);e&&this.container&&(this.container.innerHTML="",document.documentElement.scrollTop,this.container.append(e))}},d=class extends u{constructor(t){super(t,"cart"),this.cart=t,this.pageInfo={itemsOnPage:3,currentPage:1}}getTotal(){let t=this.cart.productSum;return this.cart.activePromoCodes.length>0&&this.cart.activePromoCodes.forEach((e=>{t*=(100-l[e])/100})),`$${Math.floor(t).toString()}`}getProductDiscount(){return`- ${Math.floor(100*(1-this.cart.productSum/this.cart.productOldSum)).toString()} %`}makePromoCard(t,e){const n=document.createElement("li");n.id=t;const a=document.createElement("span"),i=document.createElement("span");return n.classList.add("discounts__item","discounts__item-promo"),a.innerText=`Promo ${t}`,i.innerText=`- ${e} %`,n.append(a,i),n}setPromoCodes(t){t.innerHTML="",this.cart.activePromoCodes.length>0&&this.cart.activePromoCodes.forEach((e=>{if(e in l){const n=this.makePromoCard(e,l[e]);t.appendChild(n)}}))}updateBill(t){console.log("bill update",this.cart.productAmount);const e=t.querySelector("#bill-item");e&&(e.innerHTML=this.cart.productAmount.toString());const n=t.querySelector("#bill-old-sum");n&&(n.innerHTML=this.cart.productOldSum.toString());const a=t.querySelector("#bill-product-discount-value");a&&(a.innerHTML=this.getProductDiscount());const i=t.querySelector("#bill-promo-container");i instanceof HTMLElement&&this.setPromoCodes(i);const r=t.querySelector("#bill-total");r&&(r.innerHTML=this.getTotal())}fillPage(t,e){const n=t.querySelector(".cart-page__container");if("empty"===e){const t=document.getElementById("empty-cart");if(t instanceof HTMLTemplateElement){const e=t.content.cloneNode(!0);null==n||n.append(e)}}if("full"===e){const t=document.getElementById("full-cart");if(t instanceof HTMLTemplateElement){const e=t.content.cloneNode(!0);if(e instanceof DocumentFragment){const t=this.fillFullPage(e);null==n||n.append(t)}}}return t}fillFullPage(t){const e=t.querySelector("#bill");if(e){this.updateBill(e);const n=t.querySelector(".full-cart-page__promo-input");n instanceof HTMLInputElement&&(n.addEventListener("input",(()=>this.cart.addPromo(n))),n.addEventListener("input",(()=>this.updateBill(e))),e.addEventListener("click",(t=>{const n=t.target;if(n instanceof HTMLElement){const t=n.closest(".discounts__item-promo");t&&(this.cart.deletePromo(t),this.updateBill(e))}})))}const n=t.querySelector(".full-cart-page__products");if(n instanceof HTMLElement&&e){c(".clean-card-btn",n).addEventListener("click",(()=>{this.cart.cleanCart(),y.loadStartPage("cart")}));const t=new class{constructor(t){this.container=t,this.cardsContainer=t.querySelector(".cart-list"),this.currentPageContainer=t.querySelector("#paginationCurrentPage"),this.maxPageContainer=t.querySelector("#pagination-max-pages"),this.itemsOnPageContainer=t.querySelector("#pagination-items")}changeCartList(t,e,n){const a=t.target;if(console.log(a,e),a instanceof HTMLElement){switch(a.id){case"paginationPageUp":this.currentPageUp(e,n);break;case"paginationPageDown":this.currentPageDown(e,n);break;case"pagination-items-plus":n=this.itemsOnPageUp(e,n);break;case"pagination-items-minus":n=this.itemsOnPageDown(e,n);break;default:a.classList.contains("product__right-arrow")&&(e=this.updateCart(e,a.closest(".cart-list__item"),"up")),a.classList.contains("product__left-arrow")&&(e=this.updateCart(e,a.closest(".cart-list__item"),"down")),this.getMaxPage(e,n)<n.currentPage&&0!==this.getMaxPage(e,n)&&(n.currentPage-=1,y.loadStartPage("cart"))}e.updateHeader(),this.updateCartList(e,n)}return{cart:e,pageInfo:n}}updateCartList(t,e){this.currentPageContainer instanceof HTMLInputElement&&(this.currentPageContainer.value=e.currentPage.toString()),this.itemsOnPageContainer instanceof HTMLInputElement&&(this.itemsOnPageContainer.value=e.itemsOnPage.toString()),this.maxPageContainer instanceof HTMLInputElement&&(this.maxPageContainer.value=this.getMaxPage(t,e).toString())}updateCart(t,e,n){if(e){const a=e.id;switch(n){case"up":t.add(a),this.updateCard(e,t,a);break;case"down":1===t.basket[a]&&e.remove(),1!==t.basket[a]&&this.updateCard(e,t,a),t.delete(a),y.loadStartPage("cart")}}return t}updateCard(t,e,n){const a=s.products.filter((t=>t.id===Number(n)))[0],i=c(".product__price",t),r=c(".product__old-price",t),o=c(".product__amount-number",t);if(i.innerHTML="$"+(a.price*e.basket[n]).toString(),a.discountPercentage){const t=Math.ceil(a.price*e.basket[n]/((100-a.discountPercentage)/100));r.innerHTML="$"+t.toString()}o.value=e.basket[n].toString()}getMaxPage(t,e){const n=Object.keys(t.basket).length;return Math.ceil(n/e.itemsOnPage)}currentPageUp(t,e){const n=this.getMaxPage(t,e);e.currentPage<n&&(e.currentPage+=1),this.fillCards(t,e)}currentPageDown(t,e){e.currentPage>1&&(e.currentPage-=1),this.fillCards(t,e)}itemsOnPageUp(t,e){return e.itemsOnPage<10&&(e.itemsOnPage+=1),this.fillCards(t,e),e}itemsOnPageDown(t,e){return e.itemsOnPage>1&&(e.itemsOnPage-=1),this.fillCards(t,e),e}fillCards(t,e){if(this.cardsContainer){this.cardsContainer.innerHTML="";const n=Object.keys(t.basket),a=(e.currentPage-1)*e.itemsOnPage;n.forEach(((n,i)=>{if(i>=a&&i<a+e.itemsOnPage){const e=new class{constructor(t,e,n){this.id=t,this.plant=s.products.filter((e=>e.id===Number(t)))[0],this.number=e,this.count=n,this.emptyCard=this.createEmptyCard(),this.priceContainer=c(".product__price",this.emptyCard),this.oldPriceContainer=c(".product__old-price",this.emptyCard),this.countContainer=c(".product__amount-number",this.emptyCard)}createEmptyCard(){const t=document.getElementById("product-cart-card");if(t instanceof HTMLTemplateElement){const e=t.content.cloneNode(!0);if(!o(e))throw new Error("Element is not HTMLElement!");return e}}draw(t){const e=this.emptyCard;if(e){if(c(".cart-list__item",e).id=this.id,c(".product__photo",e).style.backgroundImage=`url('assets/img/${this.plant.thumbnail}')`,c(".cart-list__number",e).innerText=this.number.toString(),c(".product__rating",e).innerHTML=this.plant.rating.toString()+"<span>&#9734;</span>",c(".product__type",e).innerText=this.plant.type,c(".product__title",e).innerText=this.plant.title,c(".product__stock-value",e).innerHTML=this.plant.stock.toString(),this.countContainer.value=this.count.toString(),this.priceContainer.innerHTML="$"+(this.plant.price*this.count).toString(),this.plant.discountPercentage>0){const t=document.createElement("div");t.classList.add("product__discount"),t.innerHTML=this.plant.discountPercentage.toString()+"<span> %</span>",c(".product__icons",e).prepend(t);const n=Math.ceil(this.plant.price*this.count/((100-this.plant.discountPercentage)/100));this.oldPriceContainer.innerHTML="$"+n.toString(),this.priceContainer.classList.add("product-page__new-price_sale")}t.append(e)}}}(n,i+1,t.basket[n]);this.cardsContainer&&e.draw(this.cardsContainer)}}))}}}(n);n.addEventListener("click",(n=>{const a=t.changeCartList(n,this.cart,this.pageInfo);this.cart=a.cart,this.pageInfo=a.pageInfo,this.updateBill(e)})),t.updateCartList(this.cart,this.pageInfo),t.fillCards(this.cart,this.pageInfo)}return t}},h=class{constructor(t){this.parentSelector=t,this.priceInputMin=c(".input-min",t),this.priceInputMax=c(".input-max",t),this.rangeInputMin=c(".range-min",t),this.rangeInputMax=c(".range-max",t),this.range=c(".slider__progress",t)}changePriceInputMin(){const t=+this.priceInputMax.value;for(+this.priceInputMin.value>=t&&(this.priceInputMin.value=(t-1).toString()),+this.priceInputMin.value<1&&(this.priceInputMin.value="1");"0"===this.priceInputMin.value[0];)this.priceInputMin.value=this.priceInputMin.value.slice(1);+this.priceInputMin.value&&(this.rangeInputMin.value=this.priceInputMin.value,this.range.style.left=+this.priceInputMin.value/+this.rangeInputMin.max*100+"%")}changePriceInputMax(){const t=+this.priceInputMin.value;for(+this.priceInputMax.value>100&&(this.priceInputMax.value="100"),+this.priceInputMax.value<=t&&(this.priceInputMax.value=(t+1).toString());"0"===this.priceInputMax.value[0];)this.priceInputMax.value=this.priceInputMax.value.slice(1);this.rangeInputMax.value=this.priceInputMax.value,this.range.style.right=100-+this.priceInputMax.value/+this.rangeInputMax.max*100+"%"}changeRangeInputMin(){const t=+this.rangeInputMin.value,e=+this.rangeInputMax.value;e-t<1?this.rangeInputMin.value=(e-1).toString():(this.priceInputMin.value=t.toString(),this.range.style.left=t/+this.rangeInputMin.max*100+"%")}changeRangeInputMax(){const t=+this.rangeInputMin.value,e=+this.rangeInputMax.value;e-t<1?this.rangeInputMax.value=(t+1).toString():(this.priceInputMax.value=e.toString(),this.range.style.right=100-e/+this.rangeInputMax.max*100+"%")}},g=class extends u{constructor(t){super(t,"catalog"),this.productCard=new class{constructor(t){this.cart=t}draw(t){const e=t,n=document.createDocumentFragment(),a=c("#productCardTemp");e.forEach((t=>{const e=a.content.cloneNode(!0);if(!o(e))throw new Error("Element is not HTMLElement!");c(".product__photo",e).style.backgroundImage=`url('assets/img/${t.thumbnail}')`,c(".product__type",e).textContent=t.type,c(".product__title",e).textContent=t.title,c(".product__description",e).textContent=t.description,c(".product__price",e).textContent=t.price.toString(),c(".product__stock-num",e).textContent=t.stock.toString(),c(".product__rating-num",e).textContent=t.rating.toString(),t.discountPercentage?(c(".product__discount-num",e).textContent=t.discountPercentage.toString(),c(".product__price",e).style.color="#ab5abb"):c(".product__discount",e).style.display="none",c(".product__title",e).addEventListener("click",(function(){y.loadStartPage(t.id.toString())}));const i=c("button",e);p(i,this.cart,t),c(".product",e).addEventListener("click",(e=>{e.target!==i&&y.loadStartPage(t.id.toString())})),n.append(e)})),c(".products__container").innerHTML="",c(".products__container").appendChild(n)}sortInput(t){let e=t.newData;t.chekedData.length&&(e=t.chekedData);const n=c(".sort-input").value.toLowerCase().trim();t.inputData=e.filter((t=>t.title.toLowerCase().includes(n)||t.type.toLowerCase().includes(n)||t.description.toLowerCase().includes(n))),this.draw(t.inputData)}sortBy(t,e){let n=e.newData;if(e.chekedData.length&&(n=e.chekedData),!o(t))throw new Error;switch(t.dataset.sort){case"rating-up":n=n.sort(((t,e)=>t.rating-e.rating));break;case"rating-down":n=n.sort(((t,e)=>e.rating-t.rating));break;case"price-up":n=n.sort(((t,e)=>t.price-e.price));break;case"price-down":n=n.sort(((t,e)=>e.price-t.price))}this.draw(n)}checkboxTypeFilter(t,e,n){if(!o(t))throw new Error;let a=e.newData;if(e.inputData.length&&(a=e.inputData),t instanceof HTMLInputElement&&(t.checked?n.push(t.value):t.checked||n.splice(n.indexOf(t.value),1)),n.length){const t=[];for(const e of n){const n=a.filter((t=>t.type.toLowerCase()===e));t.push(n)}a=t.flat(),e.chekedData=t.flat()}this.draw(a)}}(t)}drawProductCard(t){const e=t.products?t.products:[];this.productCard.draw(e);const n={newData:e,inputData:[],sortData:[],chekedData:[],priceData:[]},a=[];c(".sort-input").addEventListener("input",(()=>this.productCard.sortInput(n))),c(".sort").addEventListener("click",(t=>this.productCard.sortBy(t.target,n))),c(".filter__type").addEventListener("change",(t=>{this.productCard.checkboxTypeFilter(t.target,n,a)}));const i=new class{constructor(){this.priceRangeInputParent=c(".filter__price"),this.priceRangeInput=new h(this.priceRangeInputParent),this.stockRangeInputParent=c(".filter__stock"),this.stockRangeInput=new h(this.stockRangeInputParent)}rangeInputFilter(t,e){if(!o(e))throw new Error;if(e.closest(".filter__stock")){const e=this.stockRangeInput,[n,a]=this.addListenerByType(e);return this.filterByStock(t,n,a)}{const e=this.priceRangeInput,[n,a]=this.addListenerByType(e);return this.filterByPrice(t,n,a)}}addListenerByType(t){return t.priceInputMin.addEventListener("change",(()=>t.changePriceInputMin())),t.priceInputMax.addEventListener("change",(()=>t.changePriceInputMax())),t.rangeInputMin.addEventListener("input",(()=>t.changeRangeInputMin())),t.rangeInputMax.addEventListener("input",(()=>t.changeRangeInputMax())),[t.priceInputMin.value,t.priceInputMax.value]}filterByPrice(t,e,n){return t.filter((t=>+e<=t.price&&t.price<=+n))}filterByStock(t,e,n){return t.filter((t=>+e<=t.stock&&t.stock<=+n))}};c(".filter").addEventListener("input",(t=>{n.priceData=i.rangeInputFilter(n.newData,t.target),this.productCard.draw(n.priceData)}))}draw(t){const e=this.makePage(t);e&&this.container&&(this.container.innerHTML="",this.container.append(e),this.drawProductCard(s))}},m=class extends u{constructor(t){super(t,"product-page"),this.cart=t}getPlant(){return this.plantId?s.products.filter((t=>t.id===Number(this.plantId)))[0]:s.products[0]}setDescription(t){const e=this.getPlant();[["Title",`${e.title}`],["Type",`${e.type}`],["Description",`${e.description}`],["Price (with discount)",`$ ${e.price}`],["Height",`${e.height} cm.`],["Rating",`&#9733 ${e.rating}`],["Quantity in stock",`${e.stock} psc.`]].forEach((e=>{const n=document.createElement("li");n.classList.add("product-page__specification-item");const a=document.createElement("span");a.classList.add("product-page__specification-name"),a.innerHTML=e[0];const i=document.createElement("span");i.classList.add("product-page__specification-text"),i.innerHTML=e[1],n.append(a,i),t.append(n)}))}makePopup(){const t=document.createElement("div");t.classList.add("product-page__popup"),t.addEventListener("click",(function(e){e.target instanceof HTMLElement&&(e.target.classList.contains("product-page__popup-img")||(t.classList.remove("product-page__popup_active"),document.body.classList.remove("body_hold")))}));const e=document.createElement("img");return e.classList.add("product-page__popup-img"),t.append(e),document.body.append(t),{popupContainer:e,popup:t}}setPictures(t){const e=this.getPlant(),n=this.makePopup(),a=t.querySelector(".product-page__photo-block");a instanceof HTMLElement&&(a.style.backgroundImage=`url('assets/img/${e.thumbnail}')`,a.addEventListener("click",(function(t){const e=t.target;if(e instanceof HTMLElement&&e.classList.contains("product-page__photo-block")){const t=e.style.backgroundImage.slice(5,-2);n.popupContainer.src=t,n.popup.classList.add("product-page__popup_active"),document.body.classList.add("body_hold")}})),e.images.forEach(((t,e)=>{const n=document.createElement("img");n.src=`assets/img/${t}`,n.classList.add("product-page__photo-mini"),n.addEventListener("click",(function(t){const e=t.target;if(e instanceof HTMLImageElement){a.style.backgroundImage=`url('${e.src}')`;const t=document.querySelector(".product-page__photo-mini_active");null==t||t.classList.remove("product-page__photo-mini_active"),e.classList.add("product-page__photo-mini_active")}})),0===e&&n.classList.add("product-page__photo-mini_active"),a&&a.append(n)})))}fillPage(t,e){if(this.plantId=e,t instanceof DocumentFragment){const e=this.getPlant();if(e){const n=t.querySelector("#product-title");n&&(n.innerHTML=e.title);const a=t.querySelector("#navigation-name");a&&(a.innerHTML=e.title);const i=t.querySelector(".product-page__info-text");i&&(i.innerHTML=e.description);const r=t.querySelector(".product-page__stoke-amount");if(e.stock>0)r&&(r.innerHTML=`(${e.stock} psc.)`);else{r&&(r.innerHTML="not in stock");const e=t.querySelector(".product-page__stoke-text");e instanceof HTMLElement&&(e.style.display="none")}const s=t.querySelector(".product-page__new-price");if(s&&(s.innerHTML=e.price.toString()),e.discountPercentage>0){const t=Math.ceil(e.price/((100-e.discountPercentage)/100)),n=document.createElement("span");n.textContent=t.toString(),n.classList.add("product-page__old-price","usd-symbol"),s&&s.after(n),s instanceof HTMLElement&&s.classList.add("product-page__new-price_sale")}const o=t.querySelector(".product-page__specification-list");o&&this.setDescription(o),this.setPictures(t);const c=t.querySelector(".product-page__add-to-cart-btn"),l=t.querySelector(".product-page__buy-now-btn");c instanceof HTMLElement&&p(c,this.cart,this.getPlant()),l instanceof HTMLElement&&function(t,e,n){const a=n.id.toString();n.stock>0?(t.classList.add("button-light"),t.addEventListener("click",(function(){!(a in e.basket)&&e.add(a),e.updateHeader(),y.loadStartPage("cart"),console.log("open popup")}))):(t.classList.add("button-unable"),t.innerHTML="Not available")}(l,this.cart,this.getPlant())}}return t}};class f{constructor(){this.cart=new class{constructor(){this.basket={},this.productAmount=0,this.productSum=0,this.productOldSum=0,this.activePromoCodes=[]}showProductAmount(t){t&&(t.innerHTML=this.productAmount.toString())}showProductSum(t){t&&(t.innerHTML=this.productSum.toString())}showProductOldSum(t){t&&(t.innerHTML=this.productOldSum.toString())}updateHeader(){const t=document.getElementById("header-amount"),e=document.getElementById("header-sum");this.showProductAmount(t),this.showProductSum(e)}add(t){const e=s.products.filter((e=>e.id===Number(t)))[0],n=Math.ceil(e.price/((100-e.discountPercentage)/100));(e.stock>this.basket[t]||!this.basket[t])&&(this.basket[t]?this.basket[t]+=1:this.basket[t]=1,this.productAmount+=1,this.productSum+=e.price,this.productOldSum+=n)}delete(t){const e=s.products.filter((e=>e.id===Number(t)))[0],n=Math.ceil(e.price/((100-e.discountPercentage)/100));t in this.basket&&(1===this.basket[t]?delete this.basket[t]:this.basket[t]-=1,this.productAmount-=1,this.productSum-=e.price,this.productOldSum-=n)}deletePromo(t){this.activePromoCodes=this.activePromoCodes.filter((e=>e!==t.id))}addPromo(t){const e=t.value.toUpperCase();e in l&&!this.activePromoCodes.includes(e)&&this.activePromoCodes.push(e)}cleanCart(){this.productAmount=0,this.productSum=0,this.productOldSum=0,Object.keys(this.basket).forEach((t=>{delete this.basket[t]})),this.updateHeader()}},f.catalogPage=new g(this.cart),f.cartPage=new d(this.cart),f.plantPage=new m(this.cart)}loadPage(){window.addEventListener("hashchange",(function(){const t=this.window.location.hash.slice(2);f.router(t)}))}static router(t){var e;e=t,Number(e)>0&&Number(e)<=s.total&&f.plantPage.draw(t),"catalog"===t&&f.catalogPage.draw(),"cart"===t&&(0===f.cartPage.cart.productAmount?f.cartPage.draw("empty"):f.cartPage.draw("full"))}static loadStartPage(t){window.location.hash=`#/${t}`,f.router(t)}start(){this.loadPage(),f.loadStartPage("catalog"),this.cart.updateHeader()}}var y=f;(new y).start()}()}();